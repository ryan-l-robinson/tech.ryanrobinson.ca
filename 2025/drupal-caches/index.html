<!-- Enforce UTF-8 encoding -->
<!DOCTYPE html>
<html lang="en-CA">
	<head>
	  <meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
		<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#2E2C2C">
		<meta name="geo.region" content="CA-ON">
		<meta name="author" content="Ryan Robinson">
		<meta name="description" content="Caches are an important tool in Drupal to keep page loads as efficient as possible, without risking showing old inaccurate information.">
		<meta name="fediverse:creator" content="@Ryan@mstdn.ca">
		<meta http-equiv="X-Content-Type-Options" content="nosniff">

		<meta property="og:title" content="Introduction to Drupal Caching">
		<meta property="og:description" content="Caches are an important tool in Drupal to keep page loads as efficient as possible, without risking showing old inaccurate information.">
		<meta property="og:url" content="https://tech.ryanrobinson.ca//2025/drupal-caches/">
		<meta property="og:image" content="https://tech.ryanrobinson.ca//img/Ryan.png">
		<meta property="og:type" content="website">

		<meta name="twitter:card" content="summary_large_image">
		<meta name="twitter:title" content="Introduction to Drupal Caching">
		<meta name="twitter:description" content="Caches are an important tool in Drupal to keep page loads as efficient as possible, without risking showing old inaccurate information.">
		<meta name="twitter:image" content="https://tech.ryanrobinson.ca//img/Ryan.png">

		<title>Introduction to Drupal Caching | Ryan Robinson Technology</title>

		<link rel="canonical" href="https://tech.ryanrobinson.ca//2025/drupal-caches/">
  	<link rel="icon" href="/img/favicon.ico" type="image/x-icon">
		<link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="Ryan Robinson Technology">
		<link rel="stylesheet" href="/dist/HMlXMiDsGn.css">
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
		<link href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css?v=1">
	</head>

	<body>
		<a href="#main" class="visually-hidden">Skip to main content</a>
		<div class="wrapper">
			<header>
				<nav class="container header-nav" aria-labelledby="landing-page-header">
					<h2 class="visually-hidden" id="landing-page-header">External Navigation Links</h2>
					<a href="https://ryanrobinson.ca" class="icon-before home-page">Ryan's Home Page</a>
				</nav>
				<div class="container title-search">
					<p class="site-title"><a href="/" class="icon-before tech-blog">Ryan Robinson Technology</a></p>
					<div id="search" class="search">
						<div class="elastic-search">
							<form id="search-form" class="search-form" role="search">
								<label for="search-input" class="visually-hidden">Search this site</label>
								<input type="search" id="search-input" class="search-input" placeholder="Search this site" aria-controls="search-results" aria-autocomplete="list">
								<button type="submit" class="search-button">Search</button>
							</form>
						</div>
					</div>
				</div>
			</header>
			<main id="main">
				<nav id="search-results" class="search-results" aria-label="Search results navigation" hidden=""></nav>
				<div class="main-content">
					<h1 id="introduction-to-drupal-caching">Introduction to Drupal Caching</h1>
					
<article data-pagefind-body="">

	

	
		<p class="post-description" data-pagefind-weight="3">
			<strong><abbr title="too long, didn't read">tl;dr</abbr>:</strong> Caches are an important tool in Drupal to keep page loads as efficient as possible, without risking showing old inaccurate information.
		</p>
	

	<div class="post-metadata border-bottom-section">
		<p><time datetime="2025-12-22">December 22, 2025</time></p>
		
			<p>Tags:
			<a href="/tags/drupal/" class="post-tag" title="Working with the Drupal content management system, either with UI configuration or with code.">Drupal</a>, 
			<a href="/tags/php/" class="post-tag" title="PHP code, the language that I work in the most often.">PHP</a>
			</p>
		
	</div>

	<p>Proper caching in Drupal development can be easily missed. This can result in problems in a few ways:</p>
<ol>
<li>If caches don't clear often enough, the page will show outdated information.</li>
<li>If caches clear too often, that's extra page load time and extra processing needed for the server every time.</li>
<li>If cache contexts are not well defined, something that is correct for one context will get displayed in a different context.</li>
</ol>
<p>Here are the big concepts as well as some examples.</p>
<h2 id="contexts">Contexts</h2>
<p>The first big concept is the idea of a context. Contexts define what situations should be considered unique for a cache. A context may be one thing, or a combination of several things, including:</p>
<h3 id="theme-context">Theme Context</h3>
<p>If there's nothing variable about the template you wish to cache except which theme it is used in, you can use the context of theme. This would be highly efficient, since it almost never needs to regenerate from scratch, just when you manually clear all caches or you change the theme. In my setting, an example is custom footer blocks. It's the same content on every page. It only needs to change if there was a theme change or a new deployment (which always includes clearing all caches anyway).</p>
<p>That's the simplest possible version of a cache context.</p>
<h3 id="user-context">User Context</h3>
<p>The content of the section may change based on which user, if it is something like a block that shows the current user's event registration history. In that case, you will need to set the context by individual user. That means it is going to be a little slower for the first time each user loads it. After that, though, it will be much faster, so it still has some big benefit compared to not caching at all.</p>
<p>The content may also change based on the role of the user. Perhaps admins have an extra link that others don't, so you need to separate that so for authenticated users it looks like one thing and for admin users it looks like another thing, but there's no difference per user. The cache context makes sure that the wrong one isn't displayed to a user of the wrong role. It is also more efficient than setting the context per user, since there are likely going to be a lot less roles than there are users at least on large sites.</p>
<h3 id="page-context">Page Context</h3>
<p>Perhaps the content changes based on which page it is tied to. This may be something like view results that change based on the exposed filters parameters, or a block showing in the sidebar that shows more information about the node you're viewing. With this cache context, you can declare that it doesn't need to rebuild for every user coming to that page, saving a lot of load time, but you also do need to make sure it is clear that on this page the block builds differently than on another page or else you're showing the wrong information.</p>
<h2 id="tags">Tags</h2>
<p>The next big concept is tags. Tags can be used to define under what conditions the cache should be rebuilt.</p>
<p>There are many default tags that are provided by Drupal core or by other modules. For example, the default node_list tag is for any time there is a change in any nodes on the site. If you have a view that is showing all nodes on it, that is a great tag to clear anytime that you want the view to update.</p>
<p>Remember the trade-off in efficiency, though. If you have a site with a lot of nodes being edited regularly, that's going to clear the cache for that view a lot. For this example of a view showing all nodes, you won't get much better than that. Depending on the need, though, you might be able to get more precise: does it only need to rebuild caches on changes to certain content types, or to a specific node? If so, you can change the cache tags to something more precise that won't need to wipe out that cache more than necessary. The question is: what are the scenarios where the cache needs to clear, and how can you achieve that without too much unnecessary clearing as well?</p>
<p>Note the two sides to that equation. You need to clarify that this block or template or view or whatever else uses a certain tag. Then you need the other scenarios to declare when it is time to clear that tag and thus rebuild everything depending on it. In many cases, one or both of those sides of the equation is already provided by Drupal core or other modules that you are building on top of and you only need to finish the job, but you do need to understand how both sides are working.</p>
<h2 id="max-age">Max Age</h2>
<p>Finally, the max age defines a maximum amount of time in seconds before the cache will need to rebuild.</p>
<p>This also includes an option to be set to PERMANENT, or -1, which means the cache will stay until manually cleared or cleared by tag. If it can be clearly defined as only ever being associated with a tag being invalidated, it's highly efficient to set the max age to permanent and let the tags do all the work.</p>
<p>You can also set the max age to 0, meaning it is never cached. This isn't ideal performance usually, but if it is something that needs to represent frequent changes and those causes of the changes are too complicated to easily put into tags, it may be a better option than trying to building a lot of custom code you need to maintain just to handle a tiny efficiency improvement.</p>
<h2 id="example-custom-sidebar-block">Example: Custom Sidebar Block</h2>
<p>I wanted custom blocks to show content related to the current node being displayed, in order to show that data in a sidebar block.</p>
<p>In this case, I needed to combine a few things:</p>
<ol>
<li>Set the context to url, in order to clarify that each URL should have its own caches version, not the same cached version across other pages.</li>
<li>Set the tag for the one specific node that impacts it.</li>
<li>Set the max age to permanent.</li>
</ol>
<p>Combined, this is saying that the cache for the block will clear if and only if the node is updated and the contents of that block will vary by page. That's exactly the optimal performance scenario, with no chance of showing bad information and no unnecessary cache clearing slowing things down.</p>
<p>There's one more complication, though: what if the block is empty? That's a little different. When the block is empty, it actually needs to not cache at all, i.e. set the max-age to 0. Otherwise, it will be fine when changing from having content to not having content, but it won't update properly when going from empty to not empty.</p>
<p>Here's some of how that works in code, as a build function of a custom block. In this example, the content has a field field_accessibility which should show up styled nicely in a sidebar if one if provided.</p>
<pre class="language-php" tabindex="0"><code class="language-php"><span class="token keyword">use</span> <span class="token package">Drupal<span class="token punctuation">\</span>Core<span class="token punctuation">\</span>Block<span class="token punctuation">\</span>BlockBase</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Drupal<span class="token punctuation">\</span>Core<span class="token punctuation">\</span>Cache<span class="token punctuation">\</span>Cache</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Drupal<span class="token punctuation">\</span>Core<span class="token punctuation">\</span>Field<span class="token punctuation">\</span>FieldItemList</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Drupal<span class="token punctuation">\</span>Core<span class="token punctuation">\</span>Plugin<span class="token punctuation">\</span>ContainerFactoryPluginInterface</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Drupal<span class="token punctuation">\</span>Core<span class="token punctuation">\</span>Routing<span class="token punctuation">\</span>RouteMatchInterface</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Drupal<span class="token punctuation">\</span>node<span class="token punctuation">\</span>NodeInterface</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Symfony<span class="token punctuation">\</span>Component<span class="token punctuation">\</span>DependencyInjection<span class="token punctuation">\</span>ContainerInterface</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">AccessibilityBlock</span> <span class="token keyword">extends</span> <span class="token class-name">BlockBase</span> <span class="token keyword">implements</span> <span class="token class-name">ContainerFactoryPluginInterface</span> <span class="token punctuation">{</span>
  <span class="token comment">/**
   * Service for getting current node ID.
   *
   * @var \Drupal\Core\Routing\RouteMatchInterface
   */</span>
  <span class="token keyword">protected</span> <span class="token class-name type-declaration">RouteMatchInterface</span> <span class="token variable">$currentRouteMatch</span><span class="token punctuation">;</span>

  <span class="token comment">/**
   * Constructs a new SearchBlock object.
   *
   * @param array $configuration
   *   The block configuration.
   * @param string $plugin_id
   *   The plugin ID for the block.
   * @param mixed $plugin_definition
   *   The plugin definition for the block.
   * @param \Drupal\Core\Routing\RouteMatchInterface $currentRouteMatch
   *   The current route service.
   */</span>
  <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__construct</span><span class="token punctuation">(</span><span class="token keyword type-hint">array</span> <span class="token variable">$configuration</span><span class="token punctuation">,</span> <span class="token variable">$plugin_id</span><span class="token punctuation">,</span> <span class="token variable">$plugin_definition</span><span class="token punctuation">,</span> <span class="token class-name type-declaration">RouteMatchInterface</span> <span class="token variable">$currentRouteMatch</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword static-context">parent</span><span class="token operator">::</span><span class="token function">__construct</span><span class="token punctuation">(</span><span class="token variable">$configuration</span><span class="token punctuation">,</span> <span class="token variable">$plugin_id</span><span class="token punctuation">,</span> <span class="token variable">$plugin_definition</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">currentRouteMatch</span> <span class="token operator">=</span> <span class="token variable">$currentRouteMatch</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/**
   * {@inheritdoc}
   */</span>
  <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">array</span> <span class="token punctuation">{</span>
    <span class="token variable">$markup</span> <span class="token operator">=</span> <span class="token string single-quoted-string">''</span><span class="token punctuation">;</span>

    <span class="token variable">$cacheability</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token variable">$cacheability</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'contexts'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'url.path'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'url.query_args'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token variable">$cacheability</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'tags'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token variable">$cacheability</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'max-age'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token variable">$node</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">currentRouteMatch</span><span class="token operator">-></span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'node'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$node</span> <span class="token keyword">instanceof</span> <span class="token class-name">NodeInterface</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token variable">$cacheability</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'tags'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name static-context">Cache</span><span class="token operator">::</span><span class="token function">mergeTags</span><span class="token punctuation">(</span><span class="token variable">$cacheability</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'tags'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token variable">$node</span><span class="token operator">-></span><span class="token function">getCacheTags</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$node</span><span class="token operator">-></span><span class="token function">hasField</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'field_accessibility'</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token variable">$node</span><span class="token operator">-></span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'field_accessibility'</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token variable">$field_accessibility</span> <span class="token operator">=</span> <span class="token variable">$node</span><span class="token operator">-></span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'field_accessibility'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$field_accessibility</span> <span class="token keyword">instanceof</span> <span class="token class-name">FieldItemList</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$field_accessibility</span> <span class="token keyword">as</span> <span class="token variable">$accessibility</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token variable">$markup</span> <span class="token operator">.=</span> <span class="token string single-quoted-string">'&lt;p class="button">'</span><span class="token punctuation">;</span>
            <span class="token variable">$title</span> <span class="token operator">=</span> <span class="token variable">$accessibility</span><span class="token operator">-></span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'title'</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token variable">$url</span> <span class="token operator">=</span> <span class="token variable">$accessibility</span><span class="token operator">-></span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'uri'</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token variable">$markup</span> <span class="token operator">.=</span> <span class="token string double-quoted-string">"&lt;a href=\"<span class="token interpolation"><span class="token variable">$url</span></span>\"><span class="token interpolation"><span class="token variable">$title</span></span>&lt;/a>"</span><span class="token punctuation">;</span>
            <span class="token variable">$markup</span> <span class="token operator">.=</span> <span class="token string double-quoted-string">"&lt;/p>"</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token comment">// If content is present, this block can be cached for a long time,</span>
          <span class="token comment">// relying on the tags to invalidate it when the node changes.</span>
          <span class="token variable">$cacheability</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'max-age'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name static-context">Cache</span><span class="token operator">::</span><span class="token constant">PERMANENT</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">[</span>
      <span class="token string single-quoted-string">'#markup'</span> <span class="token operator">=></span> <span class="token variable">$markup</span><span class="token punctuation">,</span>
      <span class="token string single-quoted-string">'#cache'</span> <span class="token operator">=></span> <span class="token variable">$cacheability</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>If there isn't an accessibility statement link, it will have 0 max-age but still be defined by context to make sure it isn't impacting other pages. If there is a link, it will get a permanent cache as well as building the markup to return.</p>
<h2 id="example-view-with-custom-tag-override-and-timed-filters">Example: View with Custom Tag Override and Timed Filters</h2>
<p>This one is a bit more complicated, but is a common scenario: what do I do for a view like &quot;upcoming events&quot;? I want to show all nodes of type event, but only when they're still in the future.</p>
<h3 id="tag-for-only-events">Tag for Only Events</h3>
<p>The first part is a little more obvious: let's narrow down the tags on the view. It only shows content of type event, so it doesn't need to be rebuilding for every change to every type of node, which is the default view setting. This could be done programmatically, but if you're doing a lot of views, it's probably worth installing <a href="https://www.drupal.org/project/views_custom_cache_tag">the views_custom_cache_tag module</a> that helps.</p>
<p>After installing and enabling that module, the Views UI will give a new option in the Caching settings for &quot;Custom Tag based&quot; as opposed to the default &quot;Tag based.&quot;</p>
<p><picture><source type="image/avif" srcset="/2025/drupal-caches/cEo3Zh7OVq-1395.avif 1395w"><source type="image/webp" srcset="/2025/drupal-caches/cEo3Zh7OVq-1395.webp 1395w"><img loading="lazy" decoding="async" src="/2025/drupal-caches/cEo3Zh7OVq-1395.png" alt="&quot;Settings page labelled as Events Home: Caching. Options in a list are Custom Tag based, None, Tag based, and Time based.&quot;" width="1395" height="477"></picture></p>
<p><picture><source type="image/avif" srcset="/2025/drupal-caches/TUbCCxyYfq-1391.avif 1391w"><source type="image/webp" srcset="/2025/drupal-caches/TUbCCxyYfq-1391.webp 1391w"><img loading="lazy" decoding="async" src="/2025/drupal-caches/TUbCCxyYfq-1391.png" alt="&quot;Settings page labelled Events Home: Caching options. It has one field, a long text with Custom tag list. The help text underneath specifies that you can put one tag per line. In this example, it uses node_list:event.&quot;" width="1391" height="374"></picture></p>
<p>That helps with narrowing down the frequency of caches to only those changes that matter. In this case, I can have a tag only for changes to events, not to changes of all nodes as would be default ,using node_list:event. There are a lot less events than there are total nodes, so this is a big performance improvement with the caches only being cleared a fraction as often.</p>
<h3 id="max-age-for-timing">Max-Age for Timing</h3>
<p>A more precise tag doesn't help with another aspect of this view, though: timing. Only upcoming events should be shown. Since the nodes aren't changing at all at the moment that the time is past, you can't rely on tags.</p>
<p>You could use a short max age just to be safe - make it an hour and it will never be more than an hour out of date, not bad in the context of events - but that's not as efficient unless you're updating events a lot anyway. That would be clearing caches a lot when it doesn't need to.</p>
<p>That's when I realized I could be a little more creative about how to generate that max age. Instead of setting it to a specific value, I could write in PHP to use the difference in time between now and when the next event starts. If the view builds now with the next event two hours away, it will set the max-age to the number of seconds between now and that time. When it hits that time, it rebuilds, finding the next upcoming event and setting a max-age based on that instead. This will result in the content never being out of date, not even for a reasonable amount of time like an hour, and also never clears unnecessarily.</p>
<p>To do this, I added this code in my .theme file:</p>
<pre class="language-php" tabindex="0"><code class="language-php"><span class="token comment">/**
 * Helper to get the timestamp until next event.
 *
 * @return int|null
 *   Time to next event's start.
 */</span>
<span class="token keyword">function</span> <span class="token function-definition function">_my_theme_get_time_to_next_event</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">int</span><span class="token operator">|</span><span class="token keyword type-declaration">null</span> <span class="token punctuation">{</span>
  <span class="token variable">$now_datetime</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DrupalDateTime</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'now'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified"><span class="token punctuation">\</span>DateTimeZone</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'UTC'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token variable">$now</span> <span class="token operator">=</span> <span class="token variable">$now_datetime</span><span class="token operator">-></span><span class="token function">format</span><span class="token punctuation">(</span><span class="token class-name static-context">DateTimeItemInterface</span><span class="token operator">::</span><span class="token constant">DATETIME_STORAGE_FORMAT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Get the next upcoming event.</span>
  <span class="token variable">$node_ids</span> <span class="token operator">=</span> <span class="token class-name class-name-fully-qualified static-context"><span class="token punctuation">\</span>Drupal</span><span class="token operator">::</span><span class="token function">entityQuery</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'node'</span><span class="token punctuation">)</span>
    <span class="token operator">-></span><span class="token function">condition</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'type'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'event'</span><span class="token punctuation">)</span>
    <span class="token operator">-></span><span class="token function">condition</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'field_start'</span><span class="token punctuation">,</span> <span class="token variable">$now</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'>'</span><span class="token punctuation">)</span>
    <span class="token operator">-></span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'field_start'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'ASC'</span><span class="token punctuation">)</span>
    <span class="token operator">-></span><span class="token function">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token operator">-></span><span class="token function">accessCheck</span><span class="token punctuation">(</span><span class="token constant boolean">FALSE</span><span class="token punctuation">)</span>
    <span class="token operator">-></span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$node_ids</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$node</span> <span class="token operator">=</span> <span class="token class-name class-name-fully-qualified static-context"><span class="token punctuation">\</span>Drupal</span><span class="token operator">::</span><span class="token function">entityTypeManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">getStorage</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'node'</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">load</span><span class="token punctuation">(</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token variable">$node_ids</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$node</span> <span class="token keyword">instanceof</span> <span class="token class-name">NodeInterface</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token variable">$start_date_value</span> <span class="token operator">=</span> <span class="token variable">$node</span><span class="token operator">-></span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'field_start'</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token property">value</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">is_string</span><span class="token punctuation">(</span><span class="token variable">$start_date_value</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 60 seconds is a minimum to allow for some buffer in build time.</span>
        <span class="token keyword">return</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token function">strtotime</span><span class="token punctuation">(</span><span class="token variable">$start_date_value</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">strtotime</span><span class="token punctuation">(</span><span class="token variable">$now</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * Implements hook_views_pre_render().
 *
 * Sets cache max-age on views with nodes
 * that can flip from visible to invisible
 * based on time.
 */</span>
<span class="token keyword">function</span> <span class="token function-definition function">my_theme_views_pre_render</span><span class="token punctuation">(</span><span class="token class-name type-declaration">ViewExecutable</span> <span class="token variable">$view</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">void</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$view</span><span class="token operator">-></span><span class="token function">id</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string single-quoted-string">'events'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">in_array</span><span class="token punctuation">(</span><span class="token variable">$view</span><span class="token operator">-></span><span class="token property">current_display</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'block_1'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'block_2'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Cache until the next upcoming event starts.</span>
      <span class="token variable">$view</span><span class="token operator">-></span><span class="token property">element</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'#cache'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'max-age'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">_my_theme_get_time_to_next_event</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">??</span> <span class="token class-name static-context">Cache</span><span class="token operator">::</span><span class="token constant">PERMANENT</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>Note: since Drupal 11.3, this would be possible to do with the new hook OOP implementation structure instead of being defined like this in the .theme file with a bunch of hooks and preprocessors, but the rest of the logic would be the same.</p>

			<div class="border-top-section">
				<div class="links-nextprev"><p><span class="visually-hidden">Previous: </span><a href="/2025/entity-usage/" class="icon-before pager-prev">Entity Usage Tracking</a></p><p><span class="visually-hidden">Next: </span><a href="/2025/devenv-dockerfiles/" class="icon-after pager-next">The Primary Web Dockerfile</a></p>
				</div>
			</div>
</article>

				</div>
				<div class="sidebar">
					
					

	<aside class="sidebar-block" aria-label="About">
		<h2 id="about">About</h2>
		<div class="sidebar-container">
  <p>I'm Ryan Robinson. I've been working in technology for my adult life, especially website development. I am now primarily focused on website development, particularly in Drupal. On this site I document some of the work I've done, whether within a full-time job, freelance work, volunteering, or as a personal side project.</p>
</div>

	</aside>


					


					

	<aside class="sidebar-block" aria-labelledby="posts-by-tag-label">
		<h2 id="posts-by-tag-label">Posts by Tag</h2>
		<div class="sidebar-container">
			
<ul class="tags-list">
	
		
		<li><a href="/tags/ai/" class="post-tag">AI</a> (4)</li>
	
		
		<li><a href="/tags/accessibility/" class="post-tag">Accessibility</a> (18)</li>
	
		
		<li><a href="/tags/crm/" class="post-tag" title="Constituent/Client/Customer Relationship Management software. I did more of this in a previous job, so don&#39;t expect much new here but there are some legacy notes.">CRM</a> (4)</li>
	
		
		<li><a href="/tags/css/" class="post-tag" title="Cascading Style Sheets, used for adding styles to websites.">CSS</a> (5)</li>
	
		
		<li><a href="/tags/devops/" class="post-tag" title="Development tools, Continuous Integration and Continuous Delivery/Deployment (CI/CD), and generally the processes that streamline development operations.">DevOps</a> (32)</li>
	
		
		<li><a href="/tags/drupal/" class="post-tag" title="Working with the Drupal content management system, either with UI configuration or with code.">Drupal</a> (48)</li>
	
		
		<li><a href="/tags/javascript/" class="post-tag" title="Interactive elements for websites.">JavaScript</a> (3)</li>
	
		
		<li><a href="/tags/linux/" class="post-tag" title="Managing Linux servers, including bash scripts and Docker container definition.">Linux</a> (13)</li>
	
		
		<li><a href="/tags/microsoft-365/" class="post-tag" title="Aspects of Microsoft&#39;s productivity and cloud suite, including usage and administration.">Microsoft 365</a> (49)</li>
	
		
		<li><a href="/tags/php/" class="post-tag" title="PHP code, the language that I work in the most often.">PHP</a> (19)</li>
	
		
		<li><a href="/tags/security/" class="post-tag" title="Security and privacy, both at the personal consumer level and in organizational contexts.">Security</a> (16)</li>
	
		
		<li><a href="/tags/static-sites/" class="post-tag" title="Building websites with static site generators, such as eleventy used for this site.">Static Sites</a> (4)</li>
	
		
		<li><a href="/tags/tech-and-society/" class="post-tag" title="Not as much how-to as most tags, instead musing about the impact of technology on the world.">Tech and Society</a> (10)</li>
	
		
		<li><a href="/tags/visual-studio-code/" class="post-tag" title="Notes on using VS Code, my primary development environment.">Visual Studio Code</a> (20)</li>
	
		
		<li><a href="/tags/wordpress/" class="post-tag" title="The WordPress content management system. I used to do this much more often, so I probably won&#39;t be adding too much more to this one.">WordPress</a> (7)</li>
	
</ul>

		</div>
	</aside>


					
<aside class="sidebar-block" aria-labelledby="posts-by-year-label">
	<h2 id="posts-by-year-label">Posts by Year</h2>
	<div class="sidebar-container">
		
<ul class="tags-list">
	
		
		<li><a href="/2025/" class="post-tag">2025</a> (22)</li>
	
		
		<li><a href="/2024/" class="post-tag">2024</a> (9)</li>
	
		
		<li><a href="/2023/" class="post-tag">2023</a> (17)</li>
	
		
		<li><a href="/2022/" class="post-tag">2022</a> (35)</li>
	
		
		<li><a href="/2021/" class="post-tag">2021</a> (77)</li>
	
</ul>

	</div>
</aside>

				</div>
			</main>
			<footer class="container" aria-label="Site Footer">
					
<nav aria-labelledby="accounts-elsewhere" id="footer">
	<h2 class="visually-hidden" id="accounts-elsewhere">Ryan's Accounts Elsewhere</h2>
	<ul class="social-links">
		<li>
			<a rel="me" href="https://www.linkedin.com/in/ryanlewisrobinson">
				<span class="visually-hidden">LinkedIn</span>
				<svg xmlns="http://www.w3.org/2000/svg" height="60" width="60" viewBox="0 0 640 640"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M160 96C124.7 96 96 124.7 96 160L96 480C96 515.3 124.7 544 160 544L480 544C515.3 544 544 515.3 544 480L544 160C544 124.7 515.3 96 480 96L160 96zM165 266.2L231.5 266.2L231.5 480L165 480L165 266.2zM236.7 198.5C236.7 219.8 219.5 237 198.2 237C176.9 237 159.7 219.8 159.7 198.5C159.7 177.2 176.9 160 198.2 160C219.5 160 236.7 177.2 236.7 198.5zM413.9 480L413.9 376C413.9 351.2 413.4 319.3 379.4 319.3C344.8 319.3 339.5 346.3 339.5 374.2L339.5 480L273.1 480L273.1 266.2L336.8 266.2L336.8 295.4L337.7 295.4C346.6 278.6 368.3 260.9 400.6 260.9C467.8 260.9 480.3 305.2 480.3 362.8L480.3 480L413.9 480z"></path></svg>
			</a>
		</li>
		<li>
			<a rel="me" href="https://github.com/ryan-l-robinson">
				<span class="visually-hidden">GitHub</span>
				<svg xmlns="http://www.w3.org/2000/svg" height="60" width="60" viewBox="0 0 640 640"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M544 160C544 124.7 515.3 96 480 96L160 96C124.7 96 96 124.7 96 160L96 480C96 515.3 124.7 544 160 544L480 544C515.3 544 544 515.3 544 480L544 160zM361.8 471.7C361.8 469.9 361.8 465.7 361.9 460.1C362 448.7 362 431.3 362 416.4C362 400.8 356.8 390.9 350.7 385.7C387.7 381.6 426.7 376.5 426.7 312.6C426.7 294.4 420.2 285.3 409.6 273.6C411.3 269.3 417 251.6 407.9 228.6C394 224.3 362.2 246.5 362.2 246.5C335.6 239 305.6 239 279 246.5C279 246.5 247.2 224.3 233.3 228.6C224.2 251.5 229.8 269.2 231.6 273.6C221 285.3 216 294.4 216 312.6C216 376.2 253.3 381.6 290.3 385.7C285.5 390 281.2 397.4 279.7 408C270.2 412.3 245.9 419.7 231.4 394.1C222.3 378.3 205.9 377 205.9 377C189.7 376.8 204.8 387.2 204.8 387.2C215.6 392.2 223.2 411.4 223.2 411.4C232.9 441.1 279.3 431.1 279.3 431.1C279.3 440.1 279.4 452.8 279.4 461.7C279.4 466.5 279.5 470.3 279.5 471.7C279.5 476 276.5 481.2 268 479.7C202 457.6 155.8 394.8 155.8 321.4C155.8 229.6 226 159.9 317.8 159.9C409.6 159.9 484 229.6 484 321.4C484.1 394.8 439.3 457.7 373.3 479.7C364.9 481.2 361.8 476 361.8 471.7zM271.3 416.9C271.1 415.4 272.4 414.1 274.3 413.7C276.2 413.5 278 414.3 278.2 415.6C278.5 416.9 277.2 418.2 275.2 418.6C273.3 419 271.5 418.2 271.3 416.9zM262.2 420.1C260 420.3 258.5 419.2 258.5 417.7C258.5 416.4 260 415.3 262 415.3C263.9 415.1 265.7 416.2 265.7 417.7C265.7 419 264.2 420.1 262.2 420.1zM247.9 417.9C246 417.5 244.7 416 245.1 414.7C245.5 413.4 247.5 412.8 249.2 413.2C251.2 413.8 252.5 415.3 252 416.6C251.6 417.9 249.6 418.5 247.9 417.9zM235.4 410.6C233.9 409.3 233.5 407.4 234.5 406.5C235.4 405.4 237.3 405.6 238.8 407.1C240.1 408.4 240.6 410.4 239.7 411.2C238.8 412.3 236.9 412.1 235.4 410.6zM226.9 400.6C225.8 399.1 225.8 397.4 226.9 396.7C228 395.8 229.7 396.5 230.6 398C231.7 399.5 231.7 401.3 230.6 402.1C229.7 402.7 228 402.1 226.9 400.6zM220.6 391.8C219.5 390.5 219.3 389 220.2 388.3C221.1 387.4 222.6 387.9 223.7 388.9C224.8 390.2 225 391.7 224.1 392.4C223.2 393.3 221.7 392.8 220.6 391.8zM214.6 385.4C213.3 384.8 212.7 383.7 213.1 382.8C213.5 382.2 214.6 381.9 215.9 382.4C217.2 383.1 217.8 384.2 217.4 385C217 385.9 215.7 386.1 214.6 385.4z"></path></svg>
			</a>
		</li>
		<li>
			<a rel="me" href="https://gitlab.com/ryan-l-robinson">
				<span class="visually-hidden">GitLab</span>
				<svg xmlns="http://www.w3.org/2000/svg" height="60" width="60" viewBox="0 0 640 640"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M96 160L96 480C96 515.3 124.7 544 160 544L480 544C515.3 544 544 515.3 544 480L544 160C544 124.7 515.3 96 480 96L160 96C124.7 96 96 124.7 96 160zM433.5 172.5L478.1 288.9L478.5 290.1C484.1 306.9 485.7 325.3 480.8 342.6C475.8 359.8 465.4 375 451 385.9L450.8 386L382.4 437.2L328.3 478.1C327.8 478.3 327.2 478.6 326.6 478.9C324.6 479.9 322.2 480.9 319.9 480.9C316.9 480.9 313.1 479.1 311.6 478.1L257.4 437.2L189.5 386.3L189.1 386L188.9 385.9C174.6 375.1 164.1 359.9 159.2 342.6C154.3 325.3 155 306.9 161.4 290.1L161.9 288.9L206.6 172.5C207.5 170.2 209.1 168.2 211.1 166.9C212.7 165.9 214.5 165.3 216.3 165.1C217.6 164.4 218.4 164.7 219.7 165.2C220.3 165.4 220.9 165.7 221.7 165.9C222.7 166.3 223.3 166.8 224.1 167.4C224.7 167.8 225.3 168.4 226.2 168.9C227.4 170.3 228.4 171.9 228.9 173.7L258.1 265.9L381 265.9L411.2 173.7C411.7 171.9 412.6 170.3 413.8 168.9C415 167.5 416.6 166.5 418.3 165.8C420 165.2 421.9 164.9 423.7 165.1C425.5 165.3 427.3 165.9 428.9 166.9C430.9 168.2 432.6 170.2 433.5 172.5z"></path></svg>
			</a>
		</li>
		<li>
			<a rel="me" href="https://dev.to/ryanr">
				<span class="visually-hidden">Dev.To</span>
				<svg xmlns="http://www.w3.org/2000/svg" height="60" width="60" viewBox="0 0 640 640"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M216.1 272.3C212.2 269.4 208.3 268 204.5 268L187.1 268L187.1 372.5L204.5 372.5C208.4 372.5 212.3 371.1 216.1 368.2C219.9 365.3 221.9 360.9 221.9 355.1L221.9 285.4C221.9 279.6 219.9 275.2 216.1 272.3zM500.1 96L139.9 96C115.7 96 96.1 115.6 96 139.8L96 500.2C96.1 524.4 115.7 544 139.9 544L500.1 544C524.3 544 543.9 524.4 544 500.2L544 139.8C543.9 115.6 524.3 96 500.1 96zM250.2 355.2C250.2 374 238.6 402.5 201.8 402.5L155.4 402.5L155.4 237L202.8 237C238.2 237 250.2 265.5 250.2 284.3L250.2 355.2zM350.9 266.5L297.6 266.5L297.6 304.9L330.2 304.9L330.2 334.5L297.6 334.5L297.6 372.9L350.9 372.9L350.9 402.5L288.7 402.5C277.5 402.8 268.3 394 268 382.8L268 257.7C267.7 246.6 276.6 237.3 287.7 237L350.9 237L350.9 266.5zM454.5 381.8C441.3 412.5 417.7 406.4 407.1 381.8L368.6 237L401.2 237L430.9 350.7L460.5 237L493.1 237L454.6 381.8z"></path></svg>
			</a>
		</li>
		<li>
			<a rel="me" href="https://mstdn.ca/@Ryan">
				<span class="visually-hidden">Mastodon</span>
				<svg xmlns="http://www.w3.org/2000/svg" height="60" width="60" viewBox="0 0 640 640"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M529 243.1C529 145.9 465.3 117.4 465.3 117.4C402.8 88.7 236.7 89 174.8 117.4C174.8 117.4 111.1 145.9 111.1 243.1C111.1 358.8 104.5 502.5 216.7 532.2C257.2 542.9 292 545.2 320 543.6C370.8 540.8 399.3 525.5 399.3 525.5L397.6 488.6C397.6 488.6 361.3 500 320.5 498.7C280.1 497.3 237.5 494.3 230.9 444.7C230.3 440.1 230 435.4 230 430.8C315.6 451.7 388.7 439.9 408.7 437.5C464.8 430.8 513.7 396.2 519.9 364.6C529.7 314.8 528.9 243.1 528.9 243.1zM453.9 368.3L407.3 368.3L407.3 254.1C407.3 204.4 343.3 202.5 343.3 261L343.3 323.5L297 323.5L297 261C297 202.5 233 204.4 233 254.1L233 368.3L186.3 368.3C186.3 246.2 181.1 220.4 204.7 193.3C230.6 164.4 284.5 162.5 308.5 199.4L320.1 218.9L331.7 199.4C355.8 162.3 409.8 164.6 435.5 193.3C459.2 220.6 453.9 246.3 453.9 368.3L453.9 368.3z"></path></svg>
			</a>
		</li>
		<li>
			<a rel="me" href="https://bsky.app/profile/ryanrobinson.ca">
				<span class="visually-hidden">Bluesky</span>
				<svg xmlns="http://www.w3.org/2000/svg" height="60" width="60" viewBox="0 0 640 640"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M160 96C124.7 96 96 124.7 96 160L96 480C96 515.3 124.7 544 160 544L480 544C515.3 544 544 515.3 544 480L544 160C544 124.7 515.3 96 480 96L160 96zM320 311.4C334.5 281.4 374 225.6 410.7 198.1C437.2 178.2 480 162.9 480 211.8C480 221.6 474.4 293.9 471.1 305.6C459.7 346.4 418.1 356.8 381.1 350.5C445.8 361.5 462.3 398 426.7 434.5C359.2 503.8 329.7 417.1 322.1 394.9L321.8 394C320.9 391.4 320.4 389.9 320 389.9C319.6 389.9 319.1 391.4 318.2 394C318.1 394.3 318 394.6 317.9 394.9C310.3 417.1 280.8 503.7 213.3 434.5C177.8 398 194.2 361.5 258.9 350.5C221.9 356.8 180.3 346.4 168.9 305.6C165.6 293.9 160 221.6 160 211.8C160 162.9 202.9 178.3 229.3 198.1C266 225.6 305.5 281.5 320 311.4z"></path></svg>
			</a>
		</li>
		<li>
			<a rel="me" href="https://pixelfed.ca/@ryan">
				<span class="visually-hidden">Pixelfed</span>
				<svg xmlns="http://www.w3.org/2000/svg" height="60" width="60" viewBox="0 0 640 640"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M320 64C461.4 64 576 178.6 576 320C576 461.4 461.4 576 320 576C178.6 576 64 461.4 64 320C64 178.6 178.6 64 320 64zM299.7 375.9L346.7 375.9C390.9 375.9 426.8 341 426.8 297.9C426.8 254.8 390.9 219.9 346.7 219.9L278.9 219.9C253.4 219.9 232.7 240 232.7 264.9L232.7 440L299.7 375.9z"></path></svg>
			</a>
		</li>
		<li>
			<a rel="me" href="https://letterboxd.com/ryanlr/">
				<span class="visually-hidden">Letterboxd</span>
				<svg xmlns="http://www.w3.org/2000/svg" height="60" width="60" viewBox="0 0 640 640"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M480 96C515.3 96 544 124.7 544 160L544 480C544 515.3 515.3 544 480 544L160 544C124.7 544 96 515.3 96 480L96 160C96 124.7 124.7 96 160 96L480 96zM201.1 251C162.4 251 131 282.3 131 321C131 359.7 162.4 391 201.1 391C225.9 391 247.6 378.2 260.1 358.8L260.6 358.1L260.2 357.5C253.7 346.9 250 334.4 250 321C250 307.4 253.9 294.7 260.6 283.9C248.2 264.1 226.2 251 201.1 251zM320 251C295.2 251 273.5 263.8 261 283.2L260.5 283.9L260.9 284.5C267.4 295.1 271.1 307.6 271.1 321C271.1 334.6 267.2 347.3 260.5 358.1C272.9 377.8 294.9 391 320 391C344.8 391 366.5 378.2 379 358.8L379.5 358.1L379.1 357.5C372.6 346.9 368.9 334.4 368.9 321C368.9 307.4 372.8 294.7 379.5 283.9C367.1 264.2 345.1 251 320 251zM438.9 251C414.1 251 392.4 263.8 379.9 283.2L379.4 283.9L379.8 284.5C386.3 295.1 390 307.6 390 321C390 334.6 386.1 347.3 379.4 358.1C391.8 377.9 413.8 391 438.9 391C477.6 391 509 359.7 509 321C509 282.3 477.6 251 438.9 251z"></path></svg>
			</a>
		</li>
		<li>
			<a rel="me" href="https://xbox.com/en-CA/play/user/ryanlr">
				<span class="visually-hidden">Xbox</span>
				<svg xmlns="http://www.w3.org/2000/svg" height="60" width="60" viewBox="0 0 640 640"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M433.9 382.2C478.2 436.5 498.6 481 488.3 500.9C480.4 516 431.6 545.5 395.7 556.8C366.1 566.1 327.3 570.1 295.3 567C257.1 563.3 218.4 549.6 185.2 528C157.3 509.8 151 502.3 151 487.4C151 457.5 183.9 405.1 240.2 345.3C272.2 311.4 316.7 271.6 321.6 272.7C331 274.8 405.9 347.8 433.9 382.2zM252.6 207.8C222.9 180.9 194.5 153.9 166.2 144.4C151 139.3 149.9 139.6 137.5 152.5C108.3 182.9 84 232.2 77.2 274.9C71.8 309.1 71.1 318.7 73 335.4C78.6 385.9 90.3 420.8 113.5 456.3C123 470.9 125.6 473.6 122.8 466.2C118.6 455.2 122.5 428.7 132.3 402.2C146.6 363.2 186.2 289.3 252.6 207.8zM564.2 271.3C547.3 191.3 496.7 141 489.6 141C482.3 141 465.4 147.5 453.6 154.9C430.3 169.4 412.6 186.3 389.3 207.7C431.7 261 491.5 347.1 512.2 410C519 430.7 521.9 451.1 519.6 462.3C517.9 470.8 517.9 470.8 521 466.9C527.1 459.2 540.9 435.6 546.4 423.4C553.8 407.2 561.4 383.2 565 364.7C569.3 342.2 568.9 293.9 564.2 271.3zM205.3 107C253 104.5 315 141.5 319.6 142.4C320.3 142.5 330 138.2 341.2 132.7C405.1 101.6 435.2 106.9 448.6 107.5C384.7 68.2 295.9 57.5 214.7 95.8C191.3 106.9 190.7 107.7 205.3 107z"></path></svg>
			</a>
		</li>
		<li>
			<a rel="me" href="/feed/feed.xml" aria-label="rss">
				<span class="visually-hidden">RSS (technically Atom) Feed</span>
				<svg xmlns="http://www.w3.org/2000/svg" height="60" width="60" viewBox="0 0 640 640"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M96 128C96 110.3 110.3 96 128 96C357.8 96 544 282.2 544 512C544 529.7 529.7 544 512 544C494.3 544 480 529.7 480 512C480 317.6 322.4 160 128 160C110.3 160 96 145.7 96 128zM96 480C96 444.7 124.7 416 160 416C195.3 416 224 444.7 224 480C224 515.3 195.3 544 160 544C124.7 544 96 515.3 96 480zM128 224C287.1 224 416 352.9 416 512C416 529.7 401.7 544 384 544C366.3 544 352 529.7 352 512C352 388.3 251.7 288 128 288C110.3 288 96 273.7 96 256C96 238.3 110.3 224 128 224z"></path></svg>
			</a>
		</li>
	</ul>
</nav>

					<p>&copy; 2025 <a href="https://ryanrobinson.ca">Ryan Robinson</a>. Powered by <a href="https://www.11ty.dev/">Eleventy</a>. The site's font is <a href="https://brailleinstitute.org/freefont">Atkinson Hyperlegible from the Braille Institute</a>.</p>
			</footer>
		</div>
		<script src="/js/elasticlunr.min.js"></script>
		<script src="/js/search.js"></script>
	</body>
</html>

<p>Suppose you want to tie in another private git package, such as something that is not listed on the Drupal directory - as part of your standard build process. Here are two approaches to do that:</p>
<h2 id="composer" tabindex="-1">Composer <a class="header-anchor" href="#composer">#</a></h2>
<p>Drupal packages are managed with a composer file. Composer files can pull from many sources. Most commonly in the case of a Drupal project, that means pulling in modules and themes from the Drupal directory. But it also includes the ability to pull in projects as zip files or a git project hosted elsewhere, even a private one.</p>
<p>Here's how:</p>
<p>Create the module that you want to pull in and give it a composer.json file. Here's an example of that file:</p>
<pre class="language-json" tabindex="0"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"ryan-robinson/demo-module"</span><span class="token punctuation">,</span>
  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"drupal-module"</span><span class="token punctuation">,</span>
  <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"Demo module"</span><span class="token punctuation">,</span>
  <span class="token property">"keywords"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"Drupal"</span><span class="token punctuation">,</span>
    <span class="token string">"module"</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"license"</span><span class="token operator">:</span> <span class="token string">"GPL-2.0+"</span><span class="token punctuation">,</span>
  <span class="token property">"require"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"drupal/core"</span><span class="token operator">:</span> <span class="token string">"^9.0 || ^10"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"config"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"platform"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"php"</span><span class="token operator">:</span> <span class="token string">"8.1"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>Add two things to the composer.json of your Drupal project:</p>
<p>One, you need to define the source for where to get the project:</p>
<pre class="language-json" tabindex="0"><code class="language-json">    <span class="token property">"repositories"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"vcs"</span><span class="token punctuation">,</span>
            <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"git@gitlab.com:ryan-robinson/demo-module.git"</span><span class="token punctuation">,</span>
            <span class="token property">"branch"</span><span class="token operator">:</span> <span class="token string">"main"</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span></code></pre>
<p>Second, you need to add it to the requirements list to pull in:</p>
<pre class="language-json" tabindex="0"><code class="language-json">    <span class="token property">"require"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"ryan-robinson/demo-module"</span><span class="token operator">:</span> <span class="token string">"dev-main"</span>
    <span class="token punctuation">}</span></code></pre>
<p>If the repository is private, you'll also need an auth.json file with your personal access token. Here's an example that would work for a GitLab project:</p>
<pre class="language-json" tabindex="0"><code class="language-json"><span class="token punctuation">{</span>
    <span class="token property">"gitlab-token"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"gitlab.com"</span><span class="token operator">:</span> <span class="token string">"token value"</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h2 id="git-submodule" tabindex="-1">Git Submodule <a class="header-anchor" href="#git-submodule">#</a></h2>
<p>The other approach is to make it a git submodule.</p>
<p>The advantage of the submodule approach is if you want to be able to continue to contribute to that. You can work on the parent project and the submodule at the same time, committing them both separately. Of course that only matters I'd you have permission to do so.</p>
<p>The context I've found myself using this: when I'm developing a custom Drupal module, I need a Docker devcontainer environment to work within for testing. That's one git repository. I also need a repository for the module itself, so that it will be ready to share with other Drupal projects (often using the composer technique above). This allows me to load the devcontainer, work on the module, and commit back to the module.</p>
<p>This can be done by running the <code>git submodule add</code> command, e.g.:</p>
<pre class="language-bash" tabindex="0"><code class="language-bash"><span class="token function">git</span> submodule <span class="token function">add</span> <span class="token punctuation">[</span>URL to module<span class="token punctuation">]</span></code></pre>
<p>This generates a .gitmodules file at the project root that looks something like this:</p>
<pre class="language-gitmodule" tabindex="0"><code class="language-gitmodule">[submodule "web/modules/custom/demo-module"]
	path = web/modules/custom/demo-module
	url = [URL to module]</code></pre>
